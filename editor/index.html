<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Audiogram</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://bbc.github.io/internalGEL/dist/internalgel-bootstrap.css">
    <!--<link rel="stylesheet" href="https://bbc.github.io/internalGEL/dist/internalgel-fonts.css">-->
    <link rel="stylesheet" href="https://bbc.github.io/internalGEL/dist/internalgel.css" id="intGEL-stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,600" rel="stylesheet" type="text/css">
    <link href="/css/base.css" rel="stylesheet" type="text/css">
    <link href="/css/editor.css" rel="stylesheet" type="text/css">
    <link href="/fonts/fonts.css" rel="stylesheet" type="text/css">
    <link href="/css/main.css" rel="stylesheet" type="text/css">
    <!-- Icons -->
    <!-- 16x16 -->
    <link rel="shortcut icon" href="favicon.ico">
    <!-- 32x32 -->
    <link rel="icon" type="image/png" href="favicon-32x32.png" sizes="32x32">
    <!-- 48x48 -->
    <link rel="icon" type="image/png" href="favicon-48x48.png" sizes="48x48">
    <!-- 96x96 -->
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96">
  </head>
  <body class="loading">
    <header>
      <svg class="labs-logo" width="62" height="80">
        <image class="labs-logo-image" xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="images/labs-logo.svg" src="images/labs-logo.png" width="62" height="80"></image>
      </svg>

      <h1 class="page-title">Audiogram<span class="title-superscript">ALPHA</span></h1>
      <a class="about-link" href="about.html">About</a>
    </header>
    <div class="wrapper">
      <div id="loading">
        <div id="loading-bars">
          <div class="r1"></div><div class="r2"></div><div class="r3"></div><div class="r4"></div><div class="r5"></div>
        </div>
        <div id="loading-message">Loading...</div>
      </div><!-- #loading -->
      <div id="loaded" class="intGEL">
        <div id="error" class="alert alert-danger" role="alert">
          <strong>Oh snap!</strong> Change a few things up and try submitting again.
        </div>


        <div class="row">



          <div class="col-md-7">

            <div id="sourceWrapper">
              <ul class="nav nav-tabs">
                <li class="active">
                  <a href="#source-tab-vcs" data-toggle="tab">VCS Item</a>
                </li>
                <li>
                  <a href="#source-tab-upload" data-toggle="tab">File Upload</a>
                </li>
                </li>
              </ul>
              <div class="tab-content">
                <div class="tab-pane active" id="source-tab-vcs">
                  <div class="row">
                    <div class="col-md-2">
                      <label class="settings" for="input-vcs">VCS Item ID:</label>
                    </div>
                    <div class="col-md-10">
                      <div class="input-group">
                        <input id="input-vcs" type="text" placeholder="00000" class="form-control" name="vcs" value="" />
                        <span class="input-group-btn">
                          <button id="vcs-search" class="btn btn-secondary" type="button"><i class="fa fa-search"></i>Find</button>
                        </span>
                      </div>
                      <div id="vcs-results" class="hidden"></div>
                    </div>
                  </div>
                </div>
                <div class="tab-pane" id="source-tab-upload">
                    <input id="input-audio" name="audio" type="file" style="width: 100%" />
                </div>
              </div>
            </div>

            <section id="minimap" class="well" style="border: none;">
              <svg width="640" height="80" xmlns="http://www.w3.org/2000/svg">
                <defs>
                  <clipPath id="clip">
                    <rect height="80" width="640" x="0" y="0"></rect>
                  </clipPath>
                </defs>
                <g class="waveform background">
                  <line x1="0" x2="640" y1="40" y2="40"></line>
                  <path></path>
                </g>
                <g class="waveform foreground" clip-path="url(#clip)">
                  <line x1="0" x2="640" y1="40" y2="40"></line>
                  <path></path>
                </g>
                <g class="brush"></g>
                <g class="time">
                  <line x1="0" x2="0" y1="0" y2="80"></line>
                </g>
              </svg>
              <div id="controls">
                <div id="timecodes">
                  <input id="start" type="text">
                  <input id="end" type="text">
                </div>
                <hr/>
                <div style="float: left;">
                  <div class="tip">
                    Click and drag over the waveform to clip audio, enter<br>
                    timecodes above, or use the <a href="#">advanced keyboard shortcuts</a>.
                  </div>
                </div>
                <div style="float: right;">
                  <div id="duration"><strong></strong> seconds selected</div>
                  <button id="play"><i class="fa fa-play"></i>Play</button>
                  <button id="pause" class="hidden"><i class="fa fa-pause"></i>Pause</button>
                  <button id="restart"><i class="fa fa-step-backward"></i>Restart</button>
                </div>
                <div class="clear"></div>
                <div id="shortcuts" style="display: none;">
                  <hr>
                  <div class="col">
                    <div>
                      <kbd>space</kbd> &nbsp; - &nbsp;
                      toggle playback
                    </div>
                    <div>
                      <kbd>&#8594;</kbd> / <kbd>&#8592;</kbd> &nbsp; - &nbsp;
                      move 0.1s
                    </div>
                    <div>
                      <kbd>ctrl</kbd> / <kbd>&#8984;</kbd> + <kbd>&#8594;</kbd> / <kbd>&#8592;</kbd> &nbsp; - &nbsp;
                      move 1s
                    </div>
                    <div>
                      <kbd>shift</kbd> + <kbd>&#8594;</kbd> / <kbd>&#8592;</kbd> &nbsp; - &nbsp;
                      move 10s
                    </div>
                  </div>
                  <div class="col">
                    <div>
                      <kbd>q</kbd> / <kbd>w</kbd> &nbsp; - &nbsp;
                      go to IN/OUT
                    </div>
                    <div>
                      <kbd>i</kbd> / <kbd>o</kbd> &nbsp; - &nbsp;
                      mark IN/OUT
                    </div>
                    <div>
                      <kbd>5</kbd> &nbsp; - &nbsp;
                      play from IN for 1s
                    </div>
                    <div>
                      <kbd>6</kbd> &nbsp; - &nbsp;
                      play from 1s before OUT
                    </div>
                  </div>
                  <div class="clear"></div>
                </div>
              </div>
            </section>



          <section id="splash" class="well" style="border: none;">
            <h1>
              Welcome to Audiogram
              <svg width="50" height="50">
                <image xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="images/wave.svg" src="images/wave.png" width="50" height="50"></image>
              </svg>
            </h1>
            <hr>
            <p>
              Audiogram is a <a href="http://bbcnewslabs.co.uk/" target="_blank">BBC News Labs</a> prototype, based on <a href="https://medium.com/@WNYC/socialaudio-e648e8a5f2e9#.7se6rlrt8" target="_blank">original work by NPR's WNYC</a> in New York, which <b>converts audio into shareable video</b>.
            </p>
            <p>
              Take a look at <a href="https://twitter.com/i/moments/847796796135026688" target="_blank">some examples on Twitter</a>.
            </p>
            <p>
              It's currently experimetal, and may (probably will) break at some point. Please tell us when it does, so we can make it better. Similarly, <b>we want your suggestions and feature requests</b>! Tell us what you like and don't like about the tool, and how we could make it better, or a more seamless component of your existing workflows.
            </p>
            <p>
              Please email <b><a href="mailto:jonty.usborne@bbc.co.uk">Jonty.Usborne@bbc.co.uk</a></b>, the BBC developer on this project, with issues, suggestions, feedback, insights into your team's workflow, and offers of free cake.
            </p>
            <hr>
            <p>
              <b>To get started, select an input source above.</b>
            </p>
          </section>

          <section id="transcript" class="well hidden">
            <div class="page-header">
              <input id="input-subtitles" class="themeConfig" type="checkbox" name="subtitles.enabled" value="true" checked> 
              <h1 style="display: inline-block">
                <label for="input-subtitles">
                  Overlay Subtitles
                </label>
              </h1>
            </div>
            <div id="transcript-pane">
              <div class="tip" style="margin: -5px 0 10px 0;">
                You can edit the transcription manually below. Highlight text to select the corresponding audio clip.
              </div>
              <transcript></transcript>
              <div class="loading">
                The transcript for this clip is waiting in a queue to be processed.<br/>
                It will appear here automatically when ready.
              </div>
            </div>
          </section>

          </div>
          <div class="col-md-5">

          <section class="well">
            <div class="page-header">
              <h1>Preview</h1>
            </div>
            <div id="canvas" style="width: 100%">
              <canvas width="640" height="360"></canvas>
              <!-- <div id="preview-label">Preview</div> -->
            </div>
          </section>



          <section class="well" style="border: none;">
            <div class="row">
              <div class="col-md-3">
                <label class="settings" for="input-theme">Preset Theme:</label>
              </div>
              <div class="col-md-9">
                <label class="intGEL-arrow" for="input-theme">
                  <select id="input-theme" name="theme" class="form-control"></select>
                </label>
              </div>
            </div>
            <div id="row-background" class="row">
              <hr>
              <div class="col-md-3">
                <label class="settings" for="input-background">Background:</label>
              </div>
              <div class="col-md-9">
                <div id="input-background-type-file" class="input-background-type" style="margin-top: 10px;">
                  <input id="input-background" name="background" type="file" />
                </div>
              </div>
            </div>
            <div id="row-wave" class="row">
              <hr>
              <div class="col-md-3">
                <label class="settings" for="input-size">Audio Wave:</label>
              </div>
              <div class="col-md-7">
                <label class="intGEL-arrow" for="input-size">
                  <select id="input-pattern" name="pattern" class="themeConfig form-control">
                    <option value="wave" selected>Wave</option>
                    <option value="line">Line</option>
                    <option value="curve">Curved Line</option>
                    <option value="bars">Bars</option>
                    <option value="pixel">Pixels</option>
                    <option value="bricks">Bricks</option>
                  </select>
                </label>
              </div>
              <div class="col-md-2">
                <input type="color" id="input-color" class="themeConfig" name="wave.color" value="#942924">
              </div>
            </div>
            <div class="row">
              <hr>
              <div class="col-md-3">
                <label class="settings" for="input-size">Size:</label>
              </div>
              <div class="col-md-9">
                <label class="intGEL-arrow" for="input-size">
                  <select id="input-size" name="size" class="themeConfig form-control">
                    <option value="1920x1080" selected>Landscape 16:9 (1920x1080)</option>
                    <option value="1280x720">Landscape 16:9 (1280x720)</option>
                    <option value="1080x1080">Square 1:1 (1080x1080)</option>
                    <option value="640x640">Square 1:1 (640x640)</option>
                    <option value="1080x1920">Portrait 9:16 (1080x1920)</option>
                    <option value="720x1280">Portrait 9:16 (720x1280)</option>
                  </select>
                </label>
              </div>
            </div>

          </section>

          <section class="well">
            <div class="btn-group">
              <button type="button" id="submit" class="btn btn-primary right"><i class="fa fa-film"></i>Generate Audiogram</button>
            </div> 
          </section>

        <div id="preview">
          <div>
          </div>
        </div>
        <div id="audio">
          <audio controls>
            <source />
          </audio>
        </div>
        <hr/>
        <div class="row" id="row-submit">
          <div class="clear"></div>
        </div>

          </div><!-- .col -->
        </div><!-- .row -->
      </div><!-- #loaded -->
      <div id="generated" class="intGEL">
        <section id="video" class="well">
          <div class="page-header">
            <h1>Generated Video</h1>
          </div>
          <video width="640" height="360" controls>
            <source type="video/mp4" />
          </video>
        </section>
        <section class="well">
          <div class="btn-group">
            <button id="return" type="button" class="left btn btn-secondary"><i class="fa fa-edit"></i>Return to editor</button>
            <a id="download" class="button right btn btn-primary" href="#" target="_blank"><i class="fa fa-download"></i>Download</a>
          </div> 
        </section>
      </div>
    </div><!-- .wrapper -->

    <footer class="site-footer-wrap">
        <div class="message-box-wrap">
        <div class="message-box">
          <h3>Please note:</h3>This is a prototype.  This means that this tool and its infrastructure is still under development and may present errors or be unavailable at times.  Please contact newslabs-development@lists.forge.bbc.co.uk with error reports.
        </div>
        </div>
    </footer>

    <script src="/js/bundle.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <!-- Force load custom fonts -->
    <script src="/fonts/fonts.js"></script>

  </body>
</html>
